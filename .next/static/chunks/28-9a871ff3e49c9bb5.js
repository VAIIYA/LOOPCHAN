"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{3028:function(e,n,t){t.d(n,{h:function(){return c}});var o=t(7437);t(2265);var l=t(6541),a=()=>{let{wallet:e,connect:n,disconnect:t}=(0,l.O)();if(e.connected){let n;return(0,o.jsxs)("div",{className:"flex items-center space-x-3 bg-green-50 border border-green-200 rounded-lg px-4 py-2",children:[(0,o.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,o.jsx)("span",{className:"text-sm font-medium text-green-800",children:(n=e.publicKey,"".concat(n.slice(0,4),"...").concat(n.slice(-4)))}),(0,o.jsx)("button",{onClick:t,className:"text-xs text-green-600 hover:text-green-800 underline transition-colors",title:"Disconnect wallet",children:"Disconnect"})]})}return(0,o.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),(0,o.jsx)("span",{className:"text-sm font-medium text-orange-800",children:"Wallet Required"})]}),(0,o.jsx)("button",{onClick:n,disabled:e.connecting,className:"bg-orange-500 hover:bg-orange-600 disabled:bg-orange-300 text-white text-sm font-medium px-3 py-1 rounded transition-colors",children:e.connecting?"Connecting...":"Connect"})]})})};let c=e=>{let{showHomeLink:n=!0,showAdvertiseLink:t=!0,title:c="LoopChan",onBack:r}=e,{wallet:s}=(0,l.O)(),i=s.connected&&"2Z9eW3nwa2GZUM1JzXdfBK1MN57RPA2PrhuTREEZ31VY"===s.publicKey;return(0,o.jsx)("header",{className:"bg-white border-b border-orange-200 shadow-sm",children:(0,o.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-6",children:[r&&(0,o.jsxs)("button",{onClick:r,className:"flex items-center space-x-2 text-orange-600 hover:text-orange-700 transition-colors",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,o.jsx)("span",{children:"Back"})]}),(0,o.jsxs)("a",{href:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[(0,o.jsx)("div",{className:"w-8 h-8 flex items-center justify-center",children:(0,o.jsx)("img",{src:"/logo.png",alt:"LoopChan Logo",className:"w-8 h-8"})}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-orange-600",children:"LoopChan"}),c&&"LoopChan"!==c&&(0,o.jsx)("span",{className:"text-sm text-gray-600",children:c})]})]}),n&&(0,o.jsx)("a",{href:"/",className:"text-orange-600 hover:text-orange-700 transition-colors",children:"Home"}),t&&(0,o.jsx)("a",{href:"/advertise",className:"text-orange-600 hover:text-orange-700 transition-colors",children:"Advertise"}),i&&(0,o.jsx)("a",{href:"/admin",className:"text-orange-600 hover:text-orange-700 transition-colors font-semibold",children:"Admin"}),s.connected&&s.publicKey&&(0,o.jsx)("a",{href:"/profile",className:"text-orange-600 hover:text-orange-700 transition-colors",children:"Profile"})]}),(0,o.jsx)(a,{})]})})})}},6541:function(e,n,t){t.d(n,{O:function(){return r},WalletProvider:function(){return s}});var o=t(7437),l=t(2265),a=t(2957).Buffer;let c=(0,l.createContext)(void 0),r=()=>{let e=(0,l.useContext)(c);if(!e)throw console.error("useWallet must be used within a WalletProvider"),Error("useWallet must be used within a WalletProvider");return e},s=e=>{let{children:n}=e,[t,r]=(0,l.useState)({publicKey:"",connected:!1,connecting:!1});(0,l.useEffect)(()=>{(()=>{try{{let e=localStorage.getItem("loopchan-wallet");if(e)try{let n=JSON.parse(e);console.log("Loading saved wallet state:",n),r(n)}catch(e){console.error("Failed to parse saved wallet state:",e),localStorage.removeItem("loopchan-wallet")}}}catch(e){console.error("Error loading wallet state:",e),r({publicKey:"",connected:!1,connecting:!1}),localStorage.removeItem("loopchan-wallet")}})()},[]),(0,l.useEffect)(()=>{try{t.connected?(localStorage.setItem("loopchan-wallet",JSON.stringify(t)),console.log("Wallet state saved to localStorage")):(localStorage.removeItem("loopchan-wallet"),console.log("Wallet state removed from localStorage"))}catch(e){console.error("Error saving wallet state to localStorage:",e)}},[t]),(0,l.useEffect)(()=>{(()=>{try{if("solana"in window){let e=window.solana;if((null==e?void 0:e.isPhantom)&&e.isConnected&&!t.connected){let n=e.publicKey.toString();console.log("Auto-detected connected wallet:",n),r({publicKey:n,connected:!0,connecting:!1})}}}catch(e){console.error("Error checking wallet availability:",e)}})();let e=()=>{try{let e=window.solana;if(null==e?void 0:e.isConnected){let n=e.publicKey.toString();console.log("Wallet connected event:",n);let t={publicKey:n,connected:!0,connecting:!1};r(t),localStorage.setItem("loopchan-wallet",JSON.stringify(t))}}catch(e){console.error("Error handling wallet connect event:",e)}},n=()=>{try{console.log("Wallet disconnected event"),r({publicKey:"",connected:!1,connecting:!1}),localStorage.removeItem("loopchan-wallet")}catch(e){console.error("Error handling wallet disconnect event:",e)}};try{if("solana"in window){let t=window.solana;return null==t||t.on("connect",e),null==t||t.on("disconnect",n),()=>{null==t||t.off("connect",e),null==t||t.off("disconnect",n)}}}catch(e){console.error("Error setting up wallet event listeners:",e)}},[t.connected]),(0,l.useEffect)(()=>{let e=()=>{try{if("solana"in window){let e=window.solana;if((null==e?void 0:e.isPhantom)&&e.isConnected){let n=e.publicKey.toString(),o=localStorage.getItem("loopchan-wallet");if(o)try{let e=JSON.parse(o);e.connected&&e.publicKey===n&&(!t.connected||t.publicKey!==n)&&(console.log("Restoring wallet state on page load:",n),r({publicKey:n,connected:!0,connecting:!1}))}catch(e){console.error("Error parsing saved wallet on page load:",e)}}}}catch(e){console.error("Error checking wallet on page load:",e)}};e();let n=setTimeout(e,100);return()=>clearTimeout(n)},[]);let s=async()=>{try{if(r(e=>({...e,connecting:!0})),"solana"in window){let e=window.solana;if(null==e?void 0:e.isPhantom)try{let n=(await e.connect()).publicKey.toString(),t={publicKey:n,connected:!0,connecting:!1};r(t),localStorage.setItem("loopchan-wallet",JSON.stringify(t)),console.log("Wallet connected successfully:",n)}catch(e){throw console.error("Phantom connect failed:",e),e}else console.warn("Phantom wallet not detected"),window.open("https://phantom.app/","_blank")}else console.warn("Solana wallet not available"),window.open("https://phantom.app/","_blank")}catch(e){throw console.error("Failed to connect wallet:",e),r(e=>({...e,connecting:!1})),e}},i=async e=>{try{if(!t.connected)throw Error("Wallet not connected");if("solana"in window){let n=window.solana;if(!(null==n?void 0:n.isPhantom))throw Error("Phantom wallet not available");let t=new TextEncoder().encode(e),o=await n.signMessage(t,"utf8");if(!(null==o?void 0:o.signature))throw Error("No signature received from wallet");let l=a.from(o.signature).toString("base64");return console.log("Message signed successfully"),l}throw Error("Solana wallet not available")}catch(e){throw console.error("Failed to sign message:",e),e}};return(0,o.jsx)(c.Provider,{value:{wallet:t,connect:s,disconnect:()=>{try{if("solana"in window){let e=window.solana;null==e||e.disconnect()}r({publicKey:"",connected:!1,connecting:!1}),localStorage.removeItem("loopchan-wallet"),console.log("Wallet disconnected successfully")}catch(e){console.error("Error disconnecting wallet:",e),r({publicKey:"",connected:!1,connecting:!1}),localStorage.removeItem("loopchan-wallet")}},signMessage:i},children:n})}}}]);