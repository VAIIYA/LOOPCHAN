(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{9985:function(e,s,t){Promise.resolve().then(t.bind(t,9139))},9139:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(7437),r=t(2265),n=t(3028),l=t(8906),d=t(3639),i=t(9763);let o=(0,i.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var c=t(5805);let m=(0,i.Z)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var x=t(6541);function h(){let{wallet:e}=(0,x.O)(),[s,t]=(0,r.useState)([]),[i,h]=(0,r.useState)(!0),[u,y]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[f,j]=(0,r.useState)(""),b=e.connected&&"2Z9eW3nwa2GZUM1JzXdfBK1MN57RPA2PrhuTREEZ31VY"===e.publicKey;(0,r.useEffect)(()=>{b&&w()},[b]);let w=async()=>{try{h(!0);let s=await fetch("/api/admin/mods",{headers:{"x-admin-wallet":e.publicKey||""}});if(s.ok){let e=await s.json();t(e.mods||[])}else 403===s.status?g("Admin access denied"):g("Failed to load mods")}catch(e){console.error("Failed to load mods:",e),g("Failed to load mods")}finally{h(!1)}},v=async()=>{if(!u.trim()){g("Please enter a wallet address");return}try{g(""),j("");let s=await fetch("/api/admin/mods",{method:"POST",headers:{"Content-Type":"application/json","x-admin-wallet":e.publicKey||""},body:JSON.stringify({action:"add",walletAddress:u.trim()})});if(s.ok)j("Mod added successfully"),y(""),w();else{let e=await s.json();g(e.error||"Failed to add mod")}}catch(e){console.error("Failed to add mod:",e),g("Failed to add mod. Please try again.")}},N=async s=>{if(confirm("Are you sure you want to remove ".concat(s.slice(0,8),"...").concat(s.slice(-8)," as a mod?")))try{g(""),j("");let t=await fetch("/api/admin/mods",{method:"POST",headers:{"Content-Type":"application/json","x-admin-wallet":e.publicKey||""},body:JSON.stringify({action:"remove",walletAddress:s})});if(t.ok)j("Mod removed successfully"),w();else{let e=await t.json();g(e.error||"Failed to remove mod")}}catch(e){console.error("Failed to remove mod:",e),g("Failed to remove mod. Please try again.")}},k=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),A=e=>"".concat(e.slice(0,8),"...").concat(e.slice(-8));return b?i?(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(n.h,{title:"Admin Dashboard",showHomeLink:!0,showAdvertiseLink:!1}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-orange-600",children:"Loading mods..."})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(n.h,{title:"Admin Dashboard",showHomeLink:!0,showAdvertiseLink:!1}),(0,a.jsxs)("main",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Manage moderators and configure LoopChan settings."})]}),p&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-red-800",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:p})]})}),f&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-green-800",children:[(0,a.jsx)("span",{children:"✓"}),(0,a.jsx)("span",{children:f})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md mb-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(o,{className:"w-6 h-6 mr-2 text-orange-500"}),"Add Moderator"]}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",value:u,onChange:e=>y(e.target.value),placeholder:"Enter Solana wallet address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-orange-500 focus:ring-1 focus:ring-orange-500"})}),(0,a.jsx)("button",{onClick:v,className:"px-6 py-2 bg-orange-500 text-white rounded-lg font-medium hover:bg-orange-600 transition-colors",children:"Add Mod"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Moderators can post and comment without paying fees."})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-md",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(c.Z,{className:"w-6 h-6 mr-2 text-orange-500"}),"Current Moderators (",s.length,")"]}),0===s.length?(0,a.jsx)("p",{className:"text-gray-500 italic",children:"No moderators added yet."}):(0,a.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-mono text-sm text-gray-700 mb-1",children:e.walletAddress}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Added by ",A(e.addedBy)," on ",k(e.addedAt)]})]}),(0,a.jsxs)("button",{onClick:()=>N(e.walletAddress),className:"flex items-center space-x-2 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[(0,a.jsx)(m,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Remove"})]})]},e._id))})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"About Moderators"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Moderators can post and comment without paying the 0.01 USDC fee"}),(0,a.jsx)("li",{children:"• Admins are automatically exempt from fees"}),(0,a.jsx)("li",{children:"• Regular users must pay 0.01 USDC per thread or comment"}),(0,a.jsx)("li",{children:"• All fees are sent to the treasury wallet: 2sRhKuPffCwT2uuGVu3DXDsLFmjv78uKkEMd9UYrF5jv"})]})]})]})]}):(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(n.h,{title:"Admin Dashboard",showHomeLink:!0,showAdvertiseLink:!1}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-8",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-md max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(l.Z,{className:"w-16 h-16 text-red-500"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"This admin dashboard is restricted to authorized wallet addresses only."}),e.connected?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Connected wallet is not authorized for admin access"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:["Connected: ",A(e.publicKey||"")]}),(0,a.jsx)("button",{onClick:()=>window.location.href="/",className:"w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors",children:"Go to Homepage"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Please connect your wallet to verify admin access."}),(0,a.jsx)("button",{onClick:()=>window.location.href="/",className:"w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors",children:"Go to Homepage"})]})]})})})]})}},9763:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,s)=>{let t=(0,a.forwardRef)((t,l)=>{let{color:d="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:m="",children:x,...h}=t;return(0,a.createElement)("svg",{ref:l,...r,width:i,height:i,stroke:d,strokeWidth:c?24*Number(o)/Number(i):o,className:["lucide","lucide-".concat(n(e)),m].join(" "),...h},[...s.map(e=>{let[s,t]=e;return(0,a.createElement)(s,t)}),...Array.isArray(x)?x:[x]])});return t.displayName="".concat(e),t}},3639:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},8906:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},5805:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[957,28,971,117,744],function(){return e(e.s=9985)}),_N_E=e.O()}]);