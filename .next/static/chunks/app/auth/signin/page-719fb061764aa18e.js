(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98],{5056:function(e,t,r){Promise.resolve().then(r.bind(r,8395))},8395:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return en}});var n,s,o,a,i,c=r(7437),l=r(2265),d=r.t(l,2);class u extends Error{constructor(e,t){e instanceof Error?super(void 0,{cause:{err:e,...e.cause,...t}}):"string"==typeof e?(t instanceof Error&&(t={err:t,...t.cause}),super(e,t)):super(void 0,e),this.name=this.constructor.name,this.type=this.constructor.type??"AuthError",this.kind=this.constructor.kind??"error",Error.captureStackTrace?.(this,this.constructor);let r=`https://errors.authjs.dev#${this.type.toLowerCase()}`;this.message+=`${this.message?". ":""}Read more at ${r}`}}class p extends u{}p.kind="signIn";class h extends u{}h.type="AdapterError";class f extends u{}f.type="AccessDenied";class m extends u{}m.type="CallbackRouteError";class y extends u{}y.type="ErrorPageLoop";class g extends u{}g.type="EventError";class x extends u{}x.type="InvalidCallbackUrl";class v extends p{constructor(){super(...arguments),this.code="credentials"}}v.type="CredentialsSignin";class w extends u{}w.type="InvalidEndpoints";class b extends u{}b.type="InvalidCheck";class E extends u{}E.type="JWTSessionError";class T extends u{}T.type="MissingAdapter";class k extends u{}k.type="MissingAdapterMethods";class S extends u{}S.type="MissingAuthorize";class U extends u{}U.type="MissingSecret";class N extends p{}N.type="OAuthAccountNotLinked";class A extends p{}A.type="OAuthCallbackError";class L extends u{}L.type="OAuthProfileParseError";class R extends u{}R.type="SessionTokenError";class j extends p{}j.type="OAuthSignInError";class C extends p{}C.type="EmailSignInError";class P extends u{}P.type="SignOutError";class _ extends u{}_.type="UnknownAction";class I extends u{}I.type="UnsupportedStrategy";class O extends u{}O.type="InvalidProvider";class H extends u{}H.type="UntrustedHost";class M extends u{}M.type="Verification";class X extends p{}X.type="MissingCSRF";class W extends u{}W.type="DuplicateConditionalUI";class F extends u{}F.type="MissingWebAuthnAutocomplete";class V extends u{}V.type="WebAuthnVerificationError";class $ extends p{}$.type="AccountNotLinked";class z extends u{}z.type="ExperimentalFeatureNotEnabled";class D extends u{}async function q(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s="".concat(J(t),"/").concat(e);try{var o;let e={headers:{"Content-Type":"application/json",...(null==n?void 0:null===(o=n.headers)||void 0===o?void 0:o.cookie)?{cookie:n.headers.cookie}:{}}};(null==n?void 0:n.body)&&(e.body=JSON.stringify(n.body),e.method="POST");let t=await fetch(s,e),r=await t.json();if(!t.ok)throw r;return r}catch(e){return r.error(new D(e.message,e)),null}}function J(e){return"undefined"==typeof window?"".concat(e.baseUrlServer).concat(e.basePathServer):e.basePath}function B(e){let t=new URL("http://localhost:3000/api/auth");e&&!e.startsWith("http")&&(e="https://".concat(e));let r=new URL(e||t),n=("/"===r.pathname?t.pathname:r.pathname).replace(/\/$/,""),s="".concat(r.origin).concat(n);return{origin:r.origin,host:r.host,path:n,base:s,toString:()=>s}}var G=r(5566);let K={baseUrl:B(null!==(s=G.env.NEXTAUTH_URL)&&void 0!==s?s:G.env.VERCEL_URL).origin,basePath:B(G.env.NEXTAUTH_URL).path,baseUrlServer:B(null!==(a=null!==(o=G.env.NEXTAUTH_URL_INTERNAL)&&void 0!==o?o:G.env.NEXTAUTH_URL)&&void 0!==a?a:G.env.VERCEL_URL).origin,basePathServer:B(null!==(i=G.env.NEXTAUTH_URL_INTERNAL)&&void 0!==i?i:G.env.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:()=>{}},Q={debug:console.debug,error:console.error,warn:console.warn};async function Y(){var e;let t=await q("csrf",K,Q);return null!==(e=null==t?void 0:t.csrfToken)&&void 0!==e?e:""}async function Z(){return q("providers",K,Q)}async function ee(e,t,r){var n,s,o;let{callbackUrl:a,...i}=null!=t?t:{},{redirect:c=!0,redirectTo:l=null!=a?a:window.location.href,...d}=i,u=J(K),p=await Z();if(!p){window.location.href="".concat(u,"/error");return}if(!e||!p[e]){let e="".concat(u,"/signin?").concat(new URLSearchParams({callbackUrl:l}));window.location.href=e;return}let h=p[e].type;if("webauthn"===h)throw TypeError(['Provider id "'.concat(e,'" refers to a WebAuthn provider.'),'Please use `import { signIn } from "next-auth/webauthn"` instead.'].join("\n"));let f="".concat(u,"/").concat("credentials"===h?"callback":"signin","/").concat(e),m=await Y(),y=await fetch("".concat(f,"?").concat(new URLSearchParams(r)),{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded","X-Auth-Return-Redirect":"1"},body:new URLSearchParams({...d,csrfToken:m,callbackUrl:l})}),g=await y.json();if(c){let e=null!==(n=g.url)&&void 0!==n?n:l;window.location.href=e,e.includes("#")&&window.location.reload();return}let x=null!==(s=new URL(g.url).searchParams.get("error"))&&void 0!==s?s:void 0,v=null!==(o=new URL(g.url).searchParams.get("code"))&&void 0!==o?o:void 0;return y.ok&&await K._getSession({event:"storage"}),{error:x,code:v,status:y.status,ok:y.ok,url:x?null:g.url}}null===(n=l.createContext)||void 0===n||n.call(d,void 0);var et=r(9376),er=r(7648);function en(){let e=(0,et.useRouter)(),[t,r]=(0,l.useState)(""),[n,s]=(0,l.useState)(""),[o,a]=(0,l.useState)(""),[i,d]=(0,l.useState)(!1),u=async r=>{r.preventDefault(),a(""),d(!0);try{let r=await ee("credentials",{email:t,password:n,redirect:!1});(null==r?void 0:r.error)?a("Invalid email or password"):(e.push("/"),e.refresh())}catch(e){a("An error occurred. Please try again.")}finally{d(!1)}};return(0,c.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-pink-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,c.jsxs)("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign in to LoopChan"}),(0,c.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",(0,c.jsx)(er.default,{href:"/auth/signup",className:"font-medium text-orange-600 hover:text-orange-500",children:"create a new account"})]})]}),(0,c.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:u,children:[o&&(0,c.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:o}),(0,c.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),(0,c.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:e=>r(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,c.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:e=>s(e.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-orange-500 focus:border-orange-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),(0,c.jsx)("div",{children:(0,c.jsx)("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50",children:i?"Signing in...":"Sign in"})})]})]})})}},5566:function(e){var t,r,n,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c=[],l=!1,d=-1;function u(){l&&n&&(l=!1,n.length?c=n.concat(c):d=-1,c.length&&p())}function p(){if(!l){var e=i(u);l=!0;for(var t=c.length;t;){for(n=c,c=[];++d<t;)n&&n[d].run();d=-1,t=c.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||l||i(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},function(e){e.O(0,[448,971,117,744],function(){return e(e.s=5056)}),_N_E=e.O()}]);