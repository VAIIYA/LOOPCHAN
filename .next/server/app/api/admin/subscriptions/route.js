"use strict";(()=>{var e={};e.id=3759,e.ids=[3759],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},55315:e=>{e.exports=require("path")},86624:e=>{e.exports=require("querystring")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},77271:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>w,requestAsyncStorage:()=>m,routeModule:()=>x,serverHooks:()=>h,staticGenerationAsyncStorage:()=>f});var s={};r.r(s),r.d(s,{GET:()=>l,POST:()=>d});var n=r(49303),i=r(88716),o=r(60670),a=r(87070),u=r(39595);let p=["2Z9eW3nwa2GZUM1JzXdfBK1MN57RPA2PrhuTREEZ31VY","HK7aLFrSXgUhaTPCJpEBDS6kgfwG9kJUBUqThFhX5PMG"];function c(e){let t=e.headers.get("x-admin-wallet");return t&&p.includes(t)?{isAdmin:!0,adminWallet:t}:{isAdmin:!1}}async function l(e){try{let{isAdmin:t}=c(e);if(!t)return a.NextResponse.json({error:"Unauthorized: Admin access required"},{status:403});let{searchParams:r}=new URL(e.url),s=r.get("action"),n=r.get("wallet");if("status"===s&&n){let e=await (0,u.ku)(n);return a.NextResponse.json({success:!0,walletAddress:n,status:e})}if("free"===s){let e=await (0,u.lJ)();return a.NextResponse.json({success:!0,freeWallets:e,count:e.length})}if("paid"===s){let e=await (0,u.nI)();return a.NextResponse.json({success:!0,paidSubscriptions:e,count:e.length})}let i=await (0,u.lJ)(),o=await (0,u.nI)();return a.NextResponse.json({success:!0,freeWallets:{wallets:i,count:i.length},paidSubscriptions:{subscriptions:o,count:o.length}})}catch(e){return console.error("Admin subscriptions API error:",e),a.NextResponse.json({error:"Failed to get subscription info"},{status:500})}}async function d(e){try{let{isAdmin:t}=c(e);if(!t)return a.NextResponse.json({error:"Unauthorized: Admin access required"},{status:403});let{action:r,walletAddress:s,paymentAmount:n}=await e.json();if(!r||!s)return a.NextResponse.json({error:"Missing required fields: action and walletAddress"},{status:400});if("add-free"===r)return await (0,u.NE)(s),a.NextResponse.json({success:!0,message:`Wallet ${s} added to free list`,walletAddress:s});if("remove-free"===r)return await (0,u.o4)(s),a.NextResponse.json({success:!0,message:`Wallet ${s} removed from free list`,walletAddress:s});if("create-subscription"===r){let e=await (0,u.XW)(s,n||.99);return a.NextResponse.json({success:!0,message:`Subscription created for wallet ${s}`,subscription:e})}return a.NextResponse.json({error:"Invalid action"},{status:400})}catch(e){return console.error("Admin subscriptions POST error:",e),a.NextResponse.json({error:"Failed to process subscription action"},{status:500})}}let x=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/subscriptions/route",pathname:"/api/admin/subscriptions",filename:"route",bundlePath:"app/api/admin/subscriptions/route"},resolvedPagePath:"/Users/meneer.groot/GitHub/LOOPCHAN/app/api/admin/subscriptions/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:h}=x,g="/api/admin/subscriptions/route";function w(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:f})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5972,9788,9595],()=>r(77271));module.exports=s})();