"use strict";(()=>{var e={};e.id=3654,e.ids=[3654],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},75108:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>h,patchFetch:()=>w,requestAsyncStorage:()=>g,routeModule:()=>c,serverHooks:()=>S,staticGenerationAsyncStorage:()=>f});var a={};r.r(a),r.d(a,{POST:()=>y});var n=r(49303),i=r(88716),s=r(60670),d=r(87070),o=r(98691),u=r(75637),l=r(11185),p=r.n(l);async function m(){if(!p().connections[0].readyState){if(!process.env.MONGODB_URI)throw Error("MONGODB_URI is not defined");await p().connect(process.env.MONGODB_URI)}}async function y(e){try{let{email:t,password:r,name:a}=await e.json();if(!t||!r)return d.NextResponse.json({error:"Email and password are required"},{status:400});if(r.length<6)return d.NextResponse.json({error:"Password must be at least 6 characters"},{status:400});if(await m(),await u.User.findOne({email:t.toLowerCase()}))return d.NextResponse.json({error:"User already exists"},{status:400});let n=await o.ZP.hash(r,10),i=new u.User({email:t.toLowerCase(),password:n,name:a||"Anonymous"});return await i.save(),d.NextResponse.json({success:!0,user:{id:i._id.toString(),email:i.email,name:i.name}})}catch(e){return console.error("Signup error:",e),d.NextResponse.json({error:"Failed to create account"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"/Users/meneer.groot/GitHub/LOOPCHAN/app/api/auth/signup/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:f,serverHooks:S}=c,h="/api/auth/signup/route";function w(){return(0,s.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:f})}},75637:(e,t,r)=>{r.r(t),r.d(t,{File:()=>c,Mod:()=>f,Post:()=>y,Thread:()=>m,User:()=>p,UserProfile:()=>g});var a=r(11185),n=r.n(a);let i=new(n()).Schema({email:{type:String,required:!0,unique:!0,lowercase:!0,trim:!0},password:{type:String,required:!0},name:{type:String,default:"Anonymous"},createdAt:{type:Date,default:Date.now}},{timestamps:!0}),s=new(n()).Schema({id:{type:String,required:!0,unique:!0},threadId:{type:String,required:!0,index:!0},content:{type:String,default:null},imageFileId:{type:n().Schema.Types.ObjectId,ref:"File",default:null},videoFileId:{type:n().Schema.Types.ObjectId,ref:"File",default:null},authorId:{type:String,required:!0},isAnonymous:{type:Boolean,default:!0},timestamp:{type:Date,default:Date.now,index:!0}},{timestamps:!0}),d=new(n()).Schema({id:{type:String,required:!0,unique:!0},slug:{type:String,required:!0,unique:!0,index:!0},title:{type:String,required:!0},opPostId:{type:String,required:!0},authorId:{type:String,required:!0},replyCount:{type:Number,default:0},imageCount:{type:Number,default:0},videoCount:{type:Number,default:0},lastActivity:{type:Date,default:Date.now,index:!0},createdAt:{type:Date,default:Date.now,index:!0}},{timestamps:!0}),o=new(n()).Schema({filename:{type:String,required:!0},contentType:{type:String,required:!0},size:{type:Number,required:!0},uploadedAt:{type:Date,default:Date.now,index:!0},uploadedBy:{type:String,required:!0},gridFSFileId:{type:n().Schema.Types.ObjectId,required:!0},isDeleted:{type:Boolean,default:!1}},{timestamps:!0}),u=new(n()).Schema({walletAddress:{type:String,required:!0,unique:!0,index:!0},username:{type:String,default:null,maxlength:50},location:{type:String,default:null,maxlength:100},socialLinks:{x:{type:String,default:null},youtube:{type:String,default:null}},bio:{type:String,default:null,maxlength:500},createdAt:{type:Date,default:Date.now},updatedAt:{type:Date,default:Date.now}},{timestamps:!0}),l=new(n()).Schema({walletAddress:{type:String,required:!0,unique:!0,index:!0},addedBy:{type:String,required:!0},addedAt:{type:Date,default:Date.now}},{timestamps:!0}),p=n().models.User||n().model("User",i),m=n().models.Thread||n().model("Thread",d),y=n().models.Post||n().model("Post",s),c=n().models.File||n().model("File",o),g=n().models.UserProfile||n().model("UserProfile",u),f=n().models.Mod||n().model("Mod",l)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5972,8691],()=>r(75108));module.exports=a})();