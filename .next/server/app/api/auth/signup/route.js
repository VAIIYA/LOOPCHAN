"use strict";(()=>{var e={};e.id=3654,e.ids=[3654],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},75108:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>S,patchFetch:()=>q,requestAsyncStorage:()=>h,routeModule:()=>y,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f});var a={};r.r(a),r.d(a,{POST:()=>c});var i=r(49303),n=r(88716),s=r(60670),o=r(87070),u=r(98691),d=r(75637),p=r(11185),l=r.n(p);async function m(){if(!l().connections[0].readyState){if(!process.env.MONGODB_URI)throw Error("MONGODB_URI is not defined");await l().connect(process.env.MONGODB_URI)}}async function c(e){try{let{email:t,password:r,name:a}=await e.json();if(!t||!r)return o.NextResponse.json({error:"Email and password are required"},{status:400});if(r.length<6)return o.NextResponse.json({error:"Password must be at least 6 characters"},{status:400});if(await m(),await d.User.findOne({email:t.toLowerCase()}))return o.NextResponse.json({error:"User already exists"},{status:400});let i=await u.ZP.hash(r,10),n=new d.User({email:t.toLowerCase(),password:i,name:a||"Anonymous"});return await n.save(),o.NextResponse.json({success:!0,user:{id:n._id.toString(),email:n.email,name:n.name}})}catch(e){return console.error("Signup error:",e),o.NextResponse.json({error:"Failed to create account"},{status:500})}}let y=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"/Users/meneer.groot/GitHub/LOOPCHAN/app/api/auth/signup/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:g}=y,S="/api/auth/signup/route";function q(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}},75637:(e,t,r)=>{r.r(t),r.d(t,{File:()=>m,Post:()=>l,Thread:()=>p,User:()=>d});var a=r(11185),i=r.n(a);let n=new(i()).Schema({email:{type:String,required:!0,unique:!0,lowercase:!0,trim:!0},password:{type:String,required:!0},name:{type:String,default:"Anonymous"},createdAt:{type:Date,default:Date.now}},{timestamps:!0}),s=new(i()).Schema({id:{type:String,required:!0,unique:!0},threadId:{type:String,required:!0,index:!0},content:{type:String,default:null},imageFileId:{type:i().Schema.Types.ObjectId,ref:"File",default:null},videoFileId:{type:i().Schema.Types.ObjectId,ref:"File",default:null},authorId:{type:i().Schema.Types.ObjectId,ref:"User",required:!0},isAnonymous:{type:Boolean,default:!0},timestamp:{type:Date,default:Date.now,index:!0}},{timestamps:!0}),o=new(i()).Schema({id:{type:String,required:!0,unique:!0},slug:{type:String,required:!0,unique:!0,index:!0},title:{type:String,required:!0},opPostId:{type:String,required:!0},authorId:{type:i().Schema.Types.ObjectId,ref:"User",required:!0},replyCount:{type:Number,default:0},imageCount:{type:Number,default:0},videoCount:{type:Number,default:0},lastActivity:{type:Date,default:Date.now,index:!0},createdAt:{type:Date,default:Date.now,index:!0}},{timestamps:!0}),u=new(i()).Schema({filename:{type:String,required:!0},contentType:{type:String,required:!0},size:{type:Number,required:!0},uploadedAt:{type:Date,default:Date.now,index:!0},uploadedBy:{type:i().Schema.Types.ObjectId,ref:"User",required:!0},gridFSFileId:{type:i().Schema.Types.ObjectId,required:!0},isDeleted:{type:Boolean,default:!1}},{timestamps:!0}),d=i().models.User||i().model("User",n),p=i().models.Thread||i().model("Thread",o),l=i().models.Post||i().model("Post",s),m=i().models.File||i().model("File",u)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[9276,5972,8691],()=>r(75108));module.exports=a})();