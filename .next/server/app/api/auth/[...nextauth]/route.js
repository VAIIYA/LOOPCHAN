"use strict";(()=>{var e={};e.id=4912,e.ids=[4912],e.modules={38013:e=>{e.exports=require("mongodb")},11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},61282:e=>{e.exports=require("child_process")},84770:e=>{e.exports=require("crypto")},80665:e=>{e.exports=require("dns")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},82452:e=>{e.exports=require("tls")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},17473:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>y,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>c,staticGenerationAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{GET:()=>o,POST:()=>u});var a=r(49303),i=r(88716),n=r(60670);let{GET:o,POST:u}=r(95456).handlers,p=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/auth/[...nextauth]/route",pathname:"/api/auth/[...nextauth]",filename:"route",bundlePath:"app/api/auth/[...nextauth]/route"},resolvedPagePath:"/Users/meneer.groot/GitHub/LOOPCHAN/app/api/auth/[...nextauth]/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:c}=p,m="/api/auth/[...nextauth]/route";function y(){return(0,n.patchFetch)({serverHooks:c,staticGenerationAsyncStorage:l})}},95456:(e,t,r)=>{r.d(t,{I8:()=>y,handlers:()=>m});var s=r(68372),a=r(27600),i=r(22058),n=r(64704),o=r(14184),u=r(98691),p=r(75637),d=r(11185),l=r.n(d);async function c(){if(!l().connections[0].readyState){if(!process.env.MONGODB_URI)throw Error("MONGODB_URI is not defined");await l().connect(process.env.MONGODB_URI)}}let{handlers:m,auth:y,signIn:h,signOut:x}=(0,s.ZP)({adapter:(0,n.dJ)(o.ZP),providers:[(0,a.Z)({credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){if(!e?.email||!e?.password)return null;await c();let t="string"==typeof e.email?e.email.toLowerCase():String(e.email).toLowerCase(),r="string"==typeof e.password?e.password:String(e.password),s=await p.User.findOne({email:t});return s&&await u.ZP.compare(r,s.password)?{id:s._id.toString(),email:s.email,name:s.name}:null}}),(0,i.Z)({server:{host:process.env.SMTP_HOST,port:Number(process.env.SMTP_PORT),auth:{user:process.env.SMTP_USER,pass:process.env.SMTP_PASSWORD}},from:process.env.SMTP_FROM||"noreply@loopchan.vercel.app"})],session:{strategy:"jwt"},pages:{signIn:"/auth/signin"},callbacks:{jwt:async({token:e,user:t})=>(t&&(e.id=t.id,e.email=t.email),e),session:async({session:e,token:t})=>(e.user&&(e.user.id=t.id),e)},secret:process.env.NEXTAUTH_SECRET||void 0})},75637:(e,t,r)=>{r.r(t),r.d(t,{File:()=>c,Post:()=>l,Thread:()=>d,User:()=>p});var s=r(11185),a=r.n(s);let i=new(a()).Schema({email:{type:String,required:!0,unique:!0,lowercase:!0,trim:!0},password:{type:String,required:!0},name:{type:String,default:"Anonymous"},createdAt:{type:Date,default:Date.now}},{timestamps:!0}),n=new(a()).Schema({id:{type:String,required:!0,unique:!0},threadId:{type:String,required:!0,index:!0},content:{type:String,default:null},imageFileId:{type:a().Schema.Types.ObjectId,ref:"File",default:null},videoFileId:{type:a().Schema.Types.ObjectId,ref:"File",default:null},authorId:{type:a().Schema.Types.ObjectId,ref:"User",required:!0},isAnonymous:{type:Boolean,default:!0},timestamp:{type:Date,default:Date.now,index:!0}},{timestamps:!0}),o=new(a()).Schema({id:{type:String,required:!0,unique:!0},slug:{type:String,required:!0,unique:!0,index:!0},title:{type:String,required:!0},opPostId:{type:String,required:!0},authorId:{type:a().Schema.Types.ObjectId,ref:"User",required:!0},replyCount:{type:Number,default:0},imageCount:{type:Number,default:0},videoCount:{type:Number,default:0},lastActivity:{type:Date,default:Date.now,index:!0},createdAt:{type:Date,default:Date.now,index:!0}},{timestamps:!0}),u=new(a()).Schema({filename:{type:String,required:!0},contentType:{type:String,required:!0},size:{type:Number,required:!0},uploadedAt:{type:Date,default:Date.now,index:!0},uploadedBy:{type:a().Schema.Types.ObjectId,ref:"User",required:!0},gridFSFileId:{type:a().Schema.Types.ObjectId,required:!0},isDeleted:{type:Boolean,default:!1}},{timestamps:!0}),p=a().models.User||a().model("User",i),d=a().models.Thread||a().model("Thread",o),l=a().models.Post||a().model("Post",n),c=a().models.File||a().model("File",u)},14184:(e,t,r)=>{let s;r.d(t,{ZP:()=>d,rW:()=>p});var a=r(38013);let i=process.env.MONGODB_URI||"mongodb://localhost:27017",n=null,o=null;async function u(){return o||(o=(await s).db()),o}async function p(){if(!n){let e=await u();n=new a.GridFSBucket(e,{bucketName:"files"})}return n}let d=s=new a.MongoClient(i,{}).connect()}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5972,8691,2694],()=>r(17473));module.exports=s})();