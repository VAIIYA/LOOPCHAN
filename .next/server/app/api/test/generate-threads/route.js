"use strict";(()=>{var e={};e.id=3214,e.ids=[3214],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},96986:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>w,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>p});var o={};r.r(o),r.d(o,{GET:()=>c,POST:()=>h,dynamic:()=>i});var a=r(49303),s=r(88716),n=r(60670),l=r(87070),d=r(67097);let i="force-dynamic";async function h(e){try{let{count:t=100,clearExisting:r=!1}=await e.json();console.log(`üß™ TEST: Generating ${t} test threads...`);let o=(await (0,d.Oo)()).threads.length;console.log(`Current thread count: ${o}`),r&&o>0&&(console.log("‚ö†Ô∏è  WARNING: clearExisting=true but we cannot clear threads in Lighthouse Storage"),console.log("Threads will be added on top, pushing existing ones down"));let a=Math.min(t,100),s=[];for(let e=1;e<=a;e++){let t=`test_thread_${Date.now()}_${e}`,r=`Test Thread ${e} - Generated for Cleanup Testing`,o={id:t,slug:`test-thread-${e}`,title:r,op:{content:`This is test thread ${e} created for testing the cleanup logic. When thread 101 is created, this thread should be removed from the board.`,authorWallet:"test_wallet_address",timestamp:new Date},replyCount:0,imageCount:0,videoCount:0,createdAt:new Date,lastActivity:new Date,authorWallet:"test_wallet_address"};try{await (0,d.gK)(o),s.push({id:t,title:r,position:e}),console.log(`‚úÖ Created test thread ${e}/${a}: "${r}"`),await new Promise(e=>setTimeout(e,10))}catch(t){console.error(`‚ùå Failed to create test thread ${e}:`,t)}}let n=await (0,d.Oo)(),i=n.threads.length;return console.log(`üéØ TEST COMPLETE: Created ${s.length} test threads`),console.log(`üìä Final thread count: ${i}`),console.log(`üìã Thread positions:`),n.threads.slice(0,10).forEach((e,t)=>{console.log(`  ${t+1}. ${e.title} (${e.id})`)}),i>10&&console.log(`  ... and ${i-10} more threads`),l.NextResponse.json({success:!0,message:`Generated ${s.length} test threads`,stats:{requested:a,created:s.length,initialCount:o,finalCount:i,threadsCreated:s}})}catch(e){return console.error("Test thread generation error:",e),l.NextResponse.json({success:!1,error:"Failed to generate test threads",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}async function c(){try{let e=await (0,d.Oo)();return l.NextResponse.json({success:!0,currentStatus:{totalThreads:e.threads.length,maxThreads:100,threadsAtLimit:e.threads.length>=100,threads:e.threads.slice(0,10).map((e,t)=>({position:t+1,id:e.id,title:e.title,slug:e.slug}))}})}catch(e){return console.error("Error getting thread status:",e),l.NextResponse.json({success:!1,error:"Failed to get thread status"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/test/generate-threads/route",pathname:"/api/test/generate-threads",filename:"route",bundlePath:"app/api/test/generate-threads/route"},resolvedPagePath:"/Users/meneer.groot/GitHub/LOOPCHAN/app/api/test/generate-threads/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:p,serverHooks:m}=u,w="/api/test/generate-threads/route";function y(){return(0,n.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:p})}},67097:(e,t,r)=>{r.d(t,{Ij:()=>n,Oo:()=>a,gK:()=>s});let o={threads:[],totalThreads:0,lastUpdated:new Date().toISOString()};async function a(){try{return console.log("Loading all threads from memory..."),console.log(`‚úÖ Loaded ${o.threads.length} threads from memory`),o}catch(e){return console.error("Error loading threads:",e),{threads:[],totalThreads:0,lastUpdated:new Date().toISOString()}}}async function s(e){try{console.log("Creating thread with data:",{id:e.id,title:e.title,slug:e.slug}),o.threads.unshift({id:e.id,slug:e.slug,title:e.title,createdAt:e.createdAt.toISOString(),lastActivity:e.lastActivity.toISOString(),replyCount:e.replyCount,imageCount:e.imageCount,videoCount:e.videoCount,op:{content:e.op.content,image:e.op.image,video:e.op.video,authorWallet:e.op.authorWallet,timestamp:e.op.timestamp.toISOString()},authorWallet:e.authorWallet}),console.log(`üìå NEW THREAD: "${e.title}" added to TOP of board (position 0)`),console.log(`Board now has ${o.threads.length} threads`),o.threads.length>100&&(console.log(`üßπ CLEANUP: Removing ${o.threads.length-100} old threads (threads 101+)...`),o.threads=o.threads.slice(0,100),console.log(`‚úÖ CLEANUP: Removed old threads. Board now has ${o.threads.length} threads (max 100)`)),o.totalThreads=o.threads.length,o.lastUpdated=new Date().toISOString(),console.log("‚úÖ Thread created successfully in memory")}catch(e){throw console.error("Error creating thread:",e),console.error("Error details:",{message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),e}}async function n(e){try{console.log(`Loading thread by ID: ${e}`);let t=o.threads.find(t=>t.id===e);if(!t)return console.log(`Thread ${e} not found`),null;let r={id:t.id,slug:t.slug,title:t.title,op:{content:"Thread content would be loaded here",authorWallet:"unknown",timestamp:new Date(t.createdAt)},replyCount:t.replyCount,imageCount:t.imageCount,videoCount:t.videoCount,createdAt:new Date(t.createdAt),lastActivity:new Date(t.lastActivity),authorWallet:"unknown"};return console.log(`‚úÖ Found thread: ${r.title}`),r}catch(t){return console.error(`Error loading thread ${e}:`,t),null}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[9276,5972],()=>r(96986));module.exports=o})();