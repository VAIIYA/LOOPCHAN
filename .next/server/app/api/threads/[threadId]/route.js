"use strict";(()=>{var e={};e.id=3109,e.ids=[3109],e.modules={38013:e=>{e.exports=require("mongodb")},11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},76162:e=>{e.exports=require("stream")},21668:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>y,requestAsyncStorage:()=>c,routeModule:()=>u,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>l,dynamic:()=>d});var o=r(49303),a=r(88716),i=r(60670),n=r(87070),p=r(29342);let d="force-dynamic";async function l(e,{params:t}){try{let{threadId:e}=t;if(!e)return n.NextResponse.json({success:!1,error:"Thread ID is required"},{status:400});let r=await (0,p.Ij)(e);if(!r)return n.NextResponse.json({success:!1,error:"Thread not found"},{status:404});console.log(`Thread ${e} found with ${r.replies?.length||0} replies`),r.replies&&r.replies.length>0?(console.log("Reply IDs:",r.replies.map(e=>e.id)),console.log("Reply details:",r.replies.map(e=>({id:e.id,hasImage:!!e.image,hasContent:!!e.content,timestamp:e.timestamp})))):console.log("No replies found for thread");let s={...r,replies:r.replies||[],lastReply:r.lastReply?"string"==typeof r.lastReply?r.lastReply:new Date(r.lastReply).toISOString():void 0,createdAt:r.createdAt?"string"==typeof r.createdAt?r.createdAt:new Date(r.createdAt).toISOString():void 0,lastActivity:r.lastActivity?"string"==typeof r.lastActivity?r.lastActivity:new Date(r.lastActivity).toISOString():void 0,op:{...r.op,timestamp:r.op?.timestamp?"string"==typeof r.op.timestamp?r.op.timestamp:new Date(r.op.timestamp).toISOString():void 0}};return n.NextResponse.json({success:!0,thread:s})}catch(e){return console.error("Thread API error:",e),n.NextResponse.json({success:!1,error:"Failed to get thread"},{status:500})}}let u=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/threads/[threadId]/route",pathname:"/api/threads/[threadId]",filename:"route",bundlePath:"app/api/threads/[threadId]/route"},resolvedPagePath:"/Users/meneer.groot/GitHub/LOOPCHAN/app/api/threads/[threadId]/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:h}=u,g="/api/threads/[threadId]/route";function y(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5972,9342],()=>r(21668));module.exports=s})();