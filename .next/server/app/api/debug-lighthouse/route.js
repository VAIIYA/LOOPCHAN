"use strict";(()=>{var e={};e.id=1954,e.ids=[1954],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},92048:e=>{e.exports=require("fs")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},98216:e=>{e.exports=require("net")},19801:e=>{e.exports=require("os")},55315:e=>{e.exports=require("path")},76162:e=>{e.exports=require("stream")},82452:e=>{e.exports=require("tls")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},6005:e=>{e.exports=require("node:crypto")},2081:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>p,patchFetch:()=>m,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>h});var o={};r.r(o),r.d(o,{GET:()=>u});var s=r(49303),n=r(88716),a=r(60670),l=r(87070),i=r(67097);async function u(){try{let e=await r.e(4232).then(r.t.bind(r,74232,23));console.log("\uD83D\uDD0D Debug: Checking environment variables..."),console.log("LIGHTHOUSE_API_KEY exists:",!!process.env.LIGHTHOUSE_API_KEY),console.log("LIGHTHOUSE_API_KEY length:",process.env.LIGHTHOUSE_API_KEY?.length||0),console.log("All env vars starting with LIGHTHOUSE:",Object.keys(process.env).filter(e=>e.startsWith("LIGHTHOUSE"))),console.log("NODE_ENV:","production"),console.log("VERCEL_ENV:",process.env.VERCEL_ENV);let t={success:!1,error:"Not tested"},o=process.env.LIGHTHOUSE_API_KEY;if(o)try{let e=await (0,i.Oo)();t={success:!0,message:"Lighthouse Storage with memory structure is working",threadCount:e?.threads?.length||0,hasData:!!e,totalThreads:e?.totalThreads||0,lastUpdated:e?.lastUpdated,apiKeyPrefix:o.substring(0,10)+"...",apiKeyLength:o.length}}catch(e){t={success:!1,error:e instanceof Error?e.message:"Unknown lighthouse error",apiKeyPrefix:o.substring(0,10)+"...",apiKeyLength:o.length}}else t={success:!1,error:"LIGHTHOUSE_API_KEY not found"};return l.NextResponse.json({success:!0,lighthouseImported:!0,lighthouseVersion:e.default?"available":"unavailable",apiKey:process.env.LIGHTHOUSE_API_KEY?"configured":"missing",apiKeyLength:process.env.LIGHTHOUSE_API_KEY?.length||0,lighthouseTest:t,environment:{nodeEnv:"production",vercelEnv:process.env.VERCEL_ENV,lighthouseVars:Object.keys(process.env).filter(e=>e.startsWith("LIGHTHOUSE")),allEnvKeys:Object.keys(process.env).length},timestamp:new Date().toISOString()})}catch(e){return l.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error",lighthouseImported:!1,timestamp:new Date().toISOString()},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/debug-lighthouse/route",pathname:"/api/debug-lighthouse",filename:"route",bundlePath:"app/api/debug-lighthouse/route"},resolvedPagePath:"/Users/meneer.groot/GitHub/LOOPCHAN/app/api/debug-lighthouse/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:h,serverHooks:g}=d,p="/api/debug-lighthouse/route";function m(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:h})}},67097:(e,t,r)=>{r.d(t,{G8:()=>l,Ij:()=>a,Oo:()=>s,gK:()=>n});let o={threads:[],totalThreads:0,lastUpdated:new Date().toISOString()};async function s(){try{return console.log("Loading all threads from memory..."),console.log(`âœ… Loaded ${o.threads.length} threads from memory`),o}catch(e){return console.error("Error loading threads:",e),{threads:[],totalThreads:0,lastUpdated:new Date().toISOString()}}}async function n(e){try{console.log("Creating thread with data:",{id:e.id,title:e.title,slug:e.slug}),o.threads.unshift({id:e.id,slug:e.slug,title:e.title,createdAt:e.createdAt.toISOString(),lastActivity:e.lastActivity.toISOString(),replyCount:e.replyCount,imageCount:e.imageCount,videoCount:e.videoCount,op:{content:e.op.content,image:e.op.image,video:e.op.video,authorWallet:e.op.authorWallet,timestamp:e.op.timestamp.toISOString()},authorWallet:e.authorWallet}),console.log(`ðŸ“Œ NEW THREAD: "${e.title}" added to TOP of board (position 0)`),console.log(`Board now has ${o.threads.length} threads`),o.threads.length>100&&(console.log(`ðŸ§¹ CLEANUP: Removing ${o.threads.length-100} old threads (threads 101+)...`),o.threads=o.threads.slice(0,100),console.log(`âœ… CLEANUP: Removed old threads. Board now has ${o.threads.length} threads (max 100)`)),o.totalThreads=o.threads.length,o.lastUpdated=new Date().toISOString(),console.log("âœ… Thread created successfully in memory")}catch(e){throw console.error("Error creating thread:",e),console.error("Error details:",{message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0}),e}}async function a(e){try{console.log(`Loading thread by ID: ${e}`);let t=o.threads.find(t=>t.id===e);if(!t)return console.log(`Thread ${e} not found`),null;let r={id:t.id,slug:t.slug,title:t.title,op:{content:"Thread content would be loaded here",authorWallet:"unknown",timestamp:new Date(t.createdAt)},replyCount:t.replyCount,imageCount:t.imageCount,videoCount:t.videoCount,createdAt:new Date(t.createdAt),lastActivity:new Date(t.lastActivity),authorWallet:"unknown"};return console.log(`âœ… Found thread: ${r.title}`),r}catch(t){return console.error(`Error loading thread ${e}:`,t),null}}async function l(e){try{console.log(`Loading thread by slug: ${e}`);let t=o.threads.find(t=>t.slug===e);if(!t)return console.log(`Thread with slug ${e} not found`),null;let r={id:t.id,slug:t.slug,title:t.title,op:{content:"Thread content would be loaded here",authorWallet:"unknown",timestamp:new Date(t.createdAt)},replyCount:t.replyCount,imageCount:t.imageCount,videoCount:t.videoCount,createdAt:new Date(t.createdAt),lastActivity:new Date(t.lastActivity),authorWallet:"unknown"};return console.log(`âœ… Found thread: ${r.title}`),{thread:r,comments:[]}}catch(t){return console.error(`Error loading thread ${e}:`,t),null}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[9276,5972],()=>r(2081));module.exports=o})();