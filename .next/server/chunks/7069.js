exports.id=7069,exports.ids=[7069],exports.modules={23815:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},71012:(e,t,r)=>{Promise.resolve().then(r.bind(r,59445))},76557:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var a=r(17577),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:c,...h},m)=>(0,a.createElement)("svg",{ref:m,...o,width:i,height:i,stroke:r,strokeWidth:l?24*Number(n)/Number(i):n,className:["lucide",`lucide-${s(e)}`,d].join(" "),...h},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},37358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},71709:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},40617:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},49758:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]])},94019:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});let a=(0,r(76557).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},96669:(e,t,r)=>{"use strict";r.d(t,{s:()=>g});var a=r(10326),o=r(17577),s=r(76557);let i=(0,s.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var n=r(49758),l=r(71709),d=r(94019);let c=(0,s.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var h=r(76715),m=r(35047);let g=({isReply:e=!1,onSubmit:t,onCancel:r})=>{let{data:s,status:g}=(0,h.kP)(),u=(0,m.useRouter)(),[p,x]=(0,o.useState)(""),[y,f]=(0,o.useState)(""),[b,v]=(0,o.useState)(null),[w,j]=(0,o.useState)(!1),k=async r=>{if(r.preventDefault(),"unauthenticated"===g||!s){u.push("/auth/signin");return}if(e){if(!p?.trim()&&!b){alert("Please provide either a comment, image, or video");return}}else{if(!y.trim()){alert("Please provide a thread title");return}if(!p?.trim()&&!b){alert("Please provide either a comment, image, or video");return}}j(!0);try{try{await t({content:p.trim()||null,title:e?null:y.trim()||null,image:b?.type.startsWith("image/")?b:null,video:b?.type.startsWith("video/")?b:null})}catch(e){throw console.error("Error in onSubmit callback:",e),e}x(""),f(""),v(null)}catch(e){console.error("Failed to submit post:",e),alert("Failed to submit post. Please try again.")}finally{j(!1)}};return"unauthenticated"!==g&&s?(0,a.jsxs)("div",{className:"bg-white border border-orange-200 rounded-lg p-6 shadow-md",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:e?"Post Reply":"Start New Thread"}),r&&a.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 transition-colors",children:a.jsx(d.Z,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[!e&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject"}),a.jsx("input",{type:"text",value:y,onChange:e=>f(e.target.value),placeholder:"Thread title...",className:"w-full bg-orange-50 border border-orange-300 rounded-lg px-3 py-2 text-gray-800 placeholder-gray-500 focus:border-orange-500 focus:ring-1 focus:ring-orange-500 outline-none",style:{fontSize:"16px"},required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comment"}),a.jsx("textarea",{value:p,onChange:e=>x(e.target.value),placeholder:"Type your message here... (optional)",rows:6,className:"w-full bg-orange-50 border border-orange-300 rounded-lg px-3 py-2 text-gray-800 placeholder-gray-500 focus:border-orange-500 focus:ring-1 focus:ring-orange-500 outline-none resize-none",style:{fontSize:"16px"}})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(()=>{if(!b)return"Media (optional)";let e=b.type.startsWith("video/");return`${e?"Video":"Image"} (${b.name})`})()}),a.jsx("div",{className:"flex space-x-2",children:(0,a.jsxs)("div",{className:"flex-1 relative",children:[a.jsx("input",{type:"file",accept:".jpg,.jpeg,.png,.gif,.webp,.webm,.mp4,.mov,video/webm,video/mp4,video/quicktime,image/jpeg,image/png,image/gif,image/webp",capture:"environment",onChange:e=>{try{let t=e.target.files?.[0];if(t){let e=["video/webm","video/mp4","video/quicktime"];if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp",...e].includes(t.type)){alert("File type not allowed. Please select a JPG, PNG, GIF, WebP image or WebM/MP4/MOV video.");return}let r=e.includes(t.type),a=r?10485760:5242880;if(t.size>a){alert(`File too large. Maximum size for ${r?"videos":"images"}: ${a/1048576}MB`);return}v(t)}}catch(e){console.error("Error handling file change:",e),alert("Error processing file. Please try again.")}},className:"w-full bg-orange-50 border border-orange-300 rounded-lg px-3 py-2 text-gray-800 placeholder-gray-500 focus:border-orange-500 focus:ring-1 focus:ring-orange-500 outline-none",style:{fontSize:"16px"}}),a.jsx("div",{className:"absolute right-3 top-2.5 text-orange-400",children:b?b.type.startsWith("video/")?a.jsx(n.Z,{size:18}):a.jsx(l.Z,{size:18}):a.jsx(i,{size:18})})]})}),a.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Images: JPG, PNG, GIF, WebP (max 5MB) | Videos: WebM, MP4, MOV (max 10MB)"}),b&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-green-600",children:["Selected: ",b.name," (",(b.size/1048576).toFixed(2),"MB)"]})]}),a.jsx("div",{className:"flex justify-end",children:(0,a.jsxs)("button",{type:"submit",disabled:!p?.trim()&&!b||!e&&!y.trim()||w,className:"flex items-center space-x-2 bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 disabled:from-gray-400 disabled:to-gray-400 disabled:cursor-not-allowed text-white px-6 py-3 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg min-h-[44px] touch-manipulation",style:{fontSize:"16px"},children:[a.jsx(c,{size:18}),a.jsx("span",{children:w?"Posting...":e?"Post Reply":"Create Thread"})]})})]})]}):a.jsx("div",{className:"bg-white border border-orange-200 rounded-lg p-6 shadow-md",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Sign In Required"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You need to sign in to create threads and post replies."}),a.jsx("button",{onClick:()=>u.push("/auth/signin"),className:"bg-gradient-to-r from-orange-500 to-pink-500 hover:from-orange-600 hover:to-pink-600 text-white px-6 py-2 rounded-lg",children:"Sign In"})]})})}},59445:(e,t,r)=>{"use strict";r.d(t,{SessionProviderWrapper:()=>s});var a=r(10326),o=r(76715);function s({children:e}){return a.jsx(o.eA,{children:e})}},51471:(e,t,r)=>{"use strict";r.d(t,{s:()=>a});class a{static async uploadFile(e){try{let t=new FormData;t.append("file",e);let r=await fetch("/api/upload",{method:"POST",body:t});if(!r.ok){let e=await r.json().catch(()=>({error:"Upload failed"}));throw Error(e.error||"Failed to upload file")}let a=await r.json();return console.log("File upload successful:",a),a}catch(e){throw console.error("File upload failed:",e),e}}static async createThread(e){console.log("Creating thread:",e);try{let t=await fetch("/api/threads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(console.log("Thread creation response status:",t.status),!t.ok){let e=await t.json().catch(()=>({error:"Failed to create thread"}));throw console.error("Thread creation error:",e),console.error("Response status:",t.status),console.error("Response headers:",Object.fromEntries(t.headers.entries())),Error(e.error||"Failed to create thread")}let r=await t.json();if(console.log("Thread creation result:",r),!r.success||!r.thread)throw console.error("Invalid thread creation result:",r),Error("Invalid response from server");return r}catch(e){throw console.error("Thread creation request failed:",e),e}}static async getThreads(e=1){console.log("Fetching threads, page:",e);try{let t=await fetch(`/api/threads?page=${e}`);if(!t.ok)return console.error("Failed to get threads, status:",t.status),{threads:[],page:e,totalPages:0,totalThreads:0};let r=await t.json();return console.log("Threads result:",r),r}catch(t){return console.error("Get threads request failed:",t),{threads:[],page:e,totalPages:0,totalThreads:0}}}static async createPost(e){console.log("Creating post:",e);let t=await fetch(`/api/threads/${e.threadId}/posts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({error:"Failed to create post"}))).error||"Failed to create post");return t.json()}static async getThread(e){try{let t=await fetch(`/api/threads/${e}`,{cache:"no-store",headers:{"Cache-Control":"no-cache"}});if(!t.ok){if(404===t.status)return{success:!1,error:"Thread not found"};let e=await t.json().catch(()=>({error:"Failed to get thread"}));return{success:!1,error:e.error||"Failed to get thread"}}return await t.json()}catch(e){return{success:!1,error:"Failed to load thread"}}}}},18906:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>n,viewport:()=>l});var a=r(19510),o=r(85384),s=r.n(o);r(61141);let i=(0,r(68570).createProxy)(String.raw`/Users/meneer.groot/GitHub/LOOPCHAN/src/components/SessionProviderWrapper.tsx#SessionProviderWrapper`),n={title:"LoopChan",description:"Anonymous discussion platform powered by Solana",icons:{icon:"/favicon.png",shortcut:"/favicon.png",apple:"/favicon.png"}},l={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,themeColor:"#f97316"};function d({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:`${s().className} bg-gradient-to-br from-orange-50 to-amber-50`,children:a.jsx(i,{children:e})})})}},61141:()=>{}};